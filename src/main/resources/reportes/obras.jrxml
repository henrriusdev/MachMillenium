<!-- Created with Jaspersoft Studio version 7.0.1.final using JasperReports Library version 7.0.1-573496633c2b4074e32f433154b543003f7d2498  -->
<jasperReport name="clientes" language="java" pageWidth="842" pageHeight="595" orientation="Landscape" whenNoDataType="AllSectionsNoDetail" columnWidth="802" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="c368610e-5bee-4e75-8f1e-ecda64380534" floatColumnFooter="true">
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="47"/>
	<property name="ireport.y" value="451"/>
	<property name="com.jaspersoft.studio.data.defaultdataadapter" value="MachMillenium"/>
	<style name="Title" forecolor="#FFFFFF" fontName="Times New Roman" fontSize="50.0" bold="false"/>
	<style name="SubTitle" forecolor="#666666" fontName="Times New Roman" fontSize="18.0" bold="false"/>
	<style name="Column header" forecolor="#666666" fontName="Times New Roman" fontSize="14.0" bold="true"/>
	<style name="Detail" mode="Transparent" fontName="Times New Roman"/>
	<style name="Row" mode="Transparent" fontName="Times New Roman" pdfFontName="Times-Roman">
		<conditionalStyle mode="Opaque" backcolor="#F0EFEF">
			<conditionExpression><![CDATA[$V{REPORT_COUNT}%2 == 0]]></conditionExpression>
		</conditionalStyle>
	</style>
	<style name="Table_TH" mode="Opaque" backcolor="#C3D9D9">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
			<topPen lineWidth="0.5" lineColor="#000000"/>
			<leftPen lineWidth="0.5" lineColor="#000000"/>
			<bottomPen lineWidth="0.5" lineColor="#000000"/>
			<rightPen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="Table_CH" mode="Opaque" backcolor="#E6FFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
			<topPen lineWidth="0.5" lineColor="#000000"/>
			<leftPen lineWidth="0.5" lineColor="#000000"/>
			<bottomPen lineWidth="0.5" lineColor="#000000"/>
			<rightPen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="Table_TD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
			<topPen lineWidth="0.5" lineColor="#000000"/>
			<leftPen lineWidth="0.5" lineColor="#000000"/>
			<bottomPen lineWidth="0.5" lineColor="#000000"/>
			<rightPen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<dataset name="clientes" uuid="c5804f93-de10-49df-89c8-b8065722443e">
		<property name="com.jaspersoft.studio.data.sql.tables" value=""/>
		<property name="com.jaspersoft.studio.data.defaultdataadapter" value="MachMillenium"/>
		<query language="SQL"><![CDATA[SELECT
		o.nombre,
		o.area,
		o.descripcion,
		o.estado,
		o.creado,
		o.modificado,
		t.nombre AS tipo,
		c.nombre AS nombre_cliente,
		p.tiempoestimado,
		p.costo
FROM public.obras o
LEFT JOIN public.tipo_obra t ON t.id = o.tipo_de_obra_id
LEFT JOIN public.presupuestos p ON p.id = o.presupuesto_id
LEFT JOIN public.clientes c ON c.id = p.cliente_id]]></query>
		<field name="nombre" class="java.lang.String">
			<property name="com.jaspersoft.studio.field.name" value="nombre"/>
			<property name="com.jaspersoft.studio.field.label" value="nombre"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="obras"/>
		</field>
		<field name="area" class="java.lang.Double">
			<property name="com.jaspersoft.studio.field.name" value="area"/>
			<property name="com.jaspersoft.studio.field.label" value="area"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="obras"/>
		</field>
		<field name="descripcion" class="java.lang.String">
			<property name="com.jaspersoft.studio.field.name" value="descripcion"/>
			<property name="com.jaspersoft.studio.field.label" value="descripcion"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="obras"/>
		</field>
		<field name="estado" class="java.lang.String">
			<property name="com.jaspersoft.studio.field.name" value="estado"/>
			<property name="com.jaspersoft.studio.field.label" value="estado"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="obras"/>
		</field>
		<field name="creado" class="java.sql.Timestamp">
			<property name="com.jaspersoft.studio.field.name" value="creado"/>
			<property name="com.jaspersoft.studio.field.label" value="creado"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="obras"/>
		</field>
		<field name="modificado" class="java.sql.Timestamp">
			<property name="com.jaspersoft.studio.field.name" value="modificado"/>
			<property name="com.jaspersoft.studio.field.label" value="modificado"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="obras"/>
		</field>
		<field name="tipo" class="java.lang.String">
			<property name="com.jaspersoft.studio.field.name" value="tipo"/>
			<property name="com.jaspersoft.studio.field.label" value="tipo"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="tipo_obra"/>
		</field>
		<field name="nombre_cliente" class="java.lang.String">
			<property name="com.jaspersoft.studio.field.name" value="nombre_cliente"/>
			<property name="com.jaspersoft.studio.field.label" value="nombre_cliente"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="clientes"/>
		</field>
		<field name="tiempoestimado" class="java.math.BigDecimal">
			<property name="com.jaspersoft.studio.field.name" value="tiempoestimado"/>
			<property name="com.jaspersoft.studio.field.label" value="tiempoestimado"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="presupuestos"/>
		</field>
		<field name="costo" class="java.lang.Double">
			<property name="com.jaspersoft.studio.field.name" value="costo"/>
			<property name="com.jaspersoft.studio.field.label" value="costo"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="presupuestos"/>
		</field>
	</dataset>
	<dataset name="clientesBarra" uuid="6d2bb222-f287-4372-9ccf-324d948f3bf6">
		<property name="com.jaspersoft.studio.data.sql.tables" value=""/>
		<property name="com.jaspersoft.studio.data.defaultdataadapter" value="MachMillenium"/>
		<query language="SQL"><![CDATA[SELECT t.nombre AS nombre, COUNT(*) AS cantidad FROM public.obras m
LEFT JOIN public.tipo_obra t ON t.id = m.tipo_de_obra_id
GROUP BY t.nombre;]]></query>
		<field name="nombre" class="java.lang.String">
			<property name="com.jaspersoft.studio.field.name" value="nombre"/>
			<property name="com.jaspersoft.studio.field.label" value="nombre"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="tipo_obra"/>
		</field>
		<field name="cantidad" class="java.lang.Long">
			<property name="com.jaspersoft.studio.field.name" value="cantidad"/>
			<property name="com.jaspersoft.studio.field.label" value="cantidad"/>
		</field>
	</dataset>
	<dataset name="obrasEstado" uuid="403a34ef-be1f-4442-8304-05169f7f0157">
		<property name="com.jaspersoft.studio.data.sql.tables" value=""/>
		<property name="com.jaspersoft.studio.data.defaultdataadapter" value="MachMillenium"/>
		<query language="SQL"><![CDATA[SELECT o.estado, COUNT(*) AS cantidad FROM public.obras o
GROUP BY o.estado]]></query>
		<field name="estado" class="java.lang.String">
			<property name="com.jaspersoft.studio.field.name" value="estado"/>
			<property name="com.jaspersoft.studio.field.label" value="estado"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="obras"/>
		</field>
		<field name="cantidad" class="java.lang.Long">
			<property name="com.jaspersoft.studio.field.name" value="cantidad"/>
			<property name="com.jaspersoft.studio.field.label" value="cantidad"/>
		</field>
	</dataset>
	<query language="sql"><![CDATA[]]></query>
	<background height="555" splitType="Stretch">
		<element kind="component" uuid="4e3387e5-dab9-43a7-9cce-20aea11f2724" x="4" y="90" width="550" height="429">
			<component kind="table">
				<datasetRun uuid="43638acd-5631-417d-b9c6-9f48db6e53ad" subDataset="clientes">
					<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				</datasetRun>
				<column kind="single" uuid="c0ec2be6-f51b-41ab-a800-e4b4fabb1c27" width="70">
					<tableHeader height="30" rowSpan="1" style="Table_TH">
						<element kind="staticText" uuid="6101c0b7-d4ea-4b1d-9601-67c7bd5ae862" x="0" y="0" width="70" height="30">
							<text><![CDATA[Nombre]]></text>
						</element>
					</tableHeader>
					<detailCell height="30" style="Table_TD">
						<element kind="textField" uuid="ed99e088-c5d6-42e7-a932-29093cd7a2c5" x="0" y="0" width="70" height="30">
							<expression><![CDATA[$F{nombre}]]></expression>
						</element>
					</detailCell>
					<property name="com.jaspersoft.studio.components.table.model.column.name" value="Column1"/>
				</column>
				<column kind="single" uuid="d83fb044-db93-4749-95b2-fe76db692870" width="70">
					<tableHeader height="30" rowSpan="1" style="Table_TH">
						<element kind="staticText" uuid="f7c7d37b-6c5f-4d13-9e48-0ed5c0191796" x="0" y="0" width="70" height="30">
							<text><![CDATA[Área]]></text>
						</element>
					</tableHeader>
					<detailCell height="30" style="Table_TD">
						<element kind="textField" uuid="8582727d-489e-46f5-8c42-1f2c165e1811" x="0" y="0" width="70" height="30">
							<expression><![CDATA[$F{area}]]></expression>
						</element>
					</detailCell>
					<property name="com.jaspersoft.studio.components.table.model.column.name" value="Column2"/>
				</column>
				<column kind="single" uuid="11ac7901-77a4-40b7-a7dc-27064cb507b9" width="90">
					<tableHeader height="30" rowSpan="1" style="Table_TH">
						<element kind="staticText" uuid="40a51323-89f7-4a63-a4bb-767398c4e2a2" x="0" y="0" width="90" height="30">
							<text><![CDATA[Descripción]]></text>
						</element>
					</tableHeader>
					<detailCell height="30" style="Table_TD">
						<element kind="textField" uuid="8ffc762b-1ada-4d2d-9c1c-93839d27f386" x="0" y="0" width="90" height="30">
							<expression><![CDATA[$F{descripcion}]]></expression>
						</element>
					</detailCell>
					<property name="com.jaspersoft.studio.components.table.model.column.name" value="Column3"/>
				</column>
				<column kind="single" uuid="f92665f1-1f79-48d5-8239-b5446cea3379" width="70">
					<tableHeader height="30" rowSpan="1" style="Table_TH">
						<element kind="staticText" uuid="1b454e10-6d01-4bb4-b070-95fcecc98305" x="0" y="0" width="70" height="30">
							<text><![CDATA[Tipo De Obra]]></text>
						</element>
					</tableHeader>
					<detailCell height="30" style="Table_TD">
						<element kind="textField" uuid="4b12bd2e-4ef2-4919-9dc6-ad605272542f" x="0" y="0" width="70" height="30">
							<expression><![CDATA[$F{tipo}]]></expression>
						</element>
					</detailCell>
					<property name="com.jaspersoft.studio.components.table.model.column.name" value="Column4"/>
				</column>
				<column kind="single" uuid="d6253d9d-2ee9-4c31-b746-9fc1e8fc6ae1" width="70">
					<tableHeader height="30" rowSpan="1" style="Table_TH">
						<element kind="staticText" uuid="0b6b73b3-806a-449d-81c5-b26f4cc18fe7" x="0" y="0" width="70" height="30">
							<text><![CDATA[Estado]]></text>
						</element>
					</tableHeader>
					<detailCell height="30" style="Table_TD">
						<element kind="textField" uuid="c5a633da-3fb4-4084-968e-839f5d7fbc2c" x="0" y="0" width="70" height="30">
							<expression><![CDATA[$F{estado}]]></expression>
						</element>
					</detailCell>
					<property name="com.jaspersoft.studio.components.table.model.column.name" value="Column5"/>
				</column>
				<column kind="single" uuid="a7bd2d15-86ab-4371-b993-0cd746ea84ab" width="60">
					<tableHeader height="30" rowSpan="1" style="Table_TH">
						<element kind="staticText" uuid="de6c724a-c4ff-4afb-affd-6fbf743d603a" x="0" y="0" width="60" height="30">
							<text><![CDATA[Tiempo estimado]]></text>
						</element>
					</tableHeader>
					<detailCell height="30" style="Table_TD">
						<element kind="textField" uuid="9c32c8e3-8ec1-40f6-811c-397f002b3ddf" x="0" y="0" width="60" height="30">
							<expression><![CDATA[$F{tiempoestimado}]]></expression>
						</element>
					</detailCell>
					<property name="com.jaspersoft.studio.components.table.model.column.name" value="Column6"/>
				</column>
				<column kind="single" uuid="f4fb39fd-5ab3-4157-ba3c-db50feac780a" width="40">
					<tableHeader height="30" rowSpan="1" style="Table_TH">
						<element kind="staticText" uuid="641360b6-3d3b-40ae-9747-1240cae7ac5a" x="0" y="0" width="40" height="30">
							<text><![CDATA[Costo]]></text>
						</element>
					</tableHeader>
					<detailCell height="30" style="Table_TD">
						<element kind="textField" uuid="16a0f38f-464f-4182-a87c-4d11eee40419" x="0" y="0" width="40" height="30">
							<expression><![CDATA[$F{costo}]]></expression>
						</element>
					</detailCell>
					<property name="com.jaspersoft.studio.components.table.model.column.name" value="Column7"/>
				</column>
				<column kind="single" uuid="7118cc16-db33-4cf6-83a3-fa8f9be7386e" width="80">
					<tableHeader height="30" rowSpan="1" style="Table_TH">
						<element kind="staticText" uuid="d1485f86-4509-47f1-a02f-29c9067f148a" x="0" y="0" width="80" height="30">
							<text><![CDATA[Cliente]]></text>
						</element>
					</tableHeader>
					<detailCell height="30" style="Table_TD">
						<element kind="textField" uuid="2d4a5bdb-77a2-4933-9409-f5c473f2ece4" x="0" y="0" width="80" height="30">
							<expression><![CDATA[$F{nombre_cliente}]]></expression>
						</element>
					</detailCell>
					<property name="com.jaspersoft.studio.components.table.model.column.name" value="Column8"/>
				</column>
			</component>
			<property name="com.jaspersoft.studio.layout" value="com.jaspersoft.studio.editor.layout.VerticalRowLayout"/>
			<property name="com.jaspersoft.studio.table.style.table_header" value="Table_TH"/>
			<property name="com.jaspersoft.studio.table.style.column_header" value="Table_CH"/>
			<property name="com.jaspersoft.studio.table.style.detail" value="Table_TD"/>
			<property name="com.jaspersoft.studio.components.autoresize.next" value="true"/>
		</element>
		<element kind="chart" chartType="pie" uuid="94ac35c3-e6dd-433d-a586-4acf07450fb9" x="570" y="100" width="238" height="210" evaluationTime="Report">
			<dataset kind="pie">
				<datasetRun uuid="c5868362-30e5-4848-8a03-ecc5d47c0a42" subDataset="clientesBarra">
					<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				</datasetRun>
				<series>
					<keyExpression><![CDATA[$F{nombre}]]></keyExpression>
					<valueExpression><![CDATA[$F{cantidad}]]></valueExpression>
				</series>
			</dataset>
			<plot>
				<itemLabel/>
			</plot>
		</element>
		<element kind="staticText" uuid="2b5a51af-2f9f-422e-b56a-46713937ee1a" x="570" y="90" width="201" height="21">
			<text><![CDATA[Cantidad de Obras por tipo]]></text>
		</element>
		<element kind="staticText" uuid="1253c962-ec12-4380-b0e7-05e8f0484c44" x="570" y="310" width="201" height="21">
			<text><![CDATA[Cantidad de Materiales por tipo]]></text>
		</element>
		<element kind="chart" chartType="pie" uuid="135f3940-4e1d-415e-aa4a-662a317430d0" x="567" y="330" width="235" height="210" evaluationTime="Report">
			<dataset kind="pie">
				<datasetRun uuid="71cd7423-cd81-4fa0-ac8d-5f7224fc9a34" subDataset="obrasEstado"/>
				<series>
					<keyExpression><![CDATA[$F{estado}]]></keyExpression>
					<valueExpression><![CDATA[$F{cantidad}]]></valueExpression>
					<labelExpression><![CDATA[$F{estado}]]></labelExpression>
				</series>
			</dataset>
			<plot>
				<itemLabel/>
			</plot>
		</element>
		<property name="com.jaspersoft.studio.unit.height" value="px"/>
	</background>
	<title height="94" splitType="Stretch">
		<element kind="staticText" uuid="0dae0af3-dd1d-4b42-b346-386af21f0689" x="336" y="65" width="449" height="29" fontSize="22.0" bold="false" hTextAlign="Right" style="SubTitle">
			<text><![CDATA[Reporte de Obras]]></text>
		</element>
		<element kind="frame" uuid="83f5e806-cc04-4161-87a9-07633f604bc1" mode="Opaque" x="-20" y="0" width="822" height="65" forecolor="#006699" backcolor="#006699">
			<element kind="staticText" uuid="f5cd9ee0-5caa-4e48-8946-c7e84d82a845" x="231" y="0" width="578" height="65" fontSize="54.0" bold="false" hTextAlign="Right" style="Title">
				<text><![CDATA[OBRAS]]></text>
			</element>
		</element>
	</title>
	<pageHeader splitType="Stretch"/>
	<columnHeader height="14" splitType="Stretch">
		<element kind="frame" uuid="2a3d298d-90eb-4db1-919a-c9b2ed28c222" x="227" y="0" width="575" height="14"/>
	</columnHeader>
	<detail>
		<band height="15" splitType="Stretch">
			<element kind="line" uuid="ad4e998c-7071-4467-b7fa-4441cc53d3f6" positionType="FixRelativeToBottom" x="227" y="14" width="575" height="1"/>
			<element kind="frame" uuid="822bafe9-34ee-4b4f-aa76-3eae029c4911" x="227" y="0" width="575" height="14"/>
			<property name="com.jaspersoft.studio.layout"/>
		</band>
	</detail>
	<columnFooter height="7" splitType="Stretch">
		<element kind="line" uuid="c23ffbf7-1928-41f8-ade3-5930d9a4871d" positionType="FixRelativeToBottom" x="0" y="3" width="555" height="1">
			<pen lineWidth="0.5" lineColor="#999999"/>
		</element>
	</columnFooter>
	<pageFooter height="16" splitType="Stretch">
		<element kind="frame" uuid="6f4fe8ef-88ca-4d5d-b46a-054826bb7893" mode="Opaque" x="2" y="0" width="800" height="16" forecolor="#D0B48E" backcolor="#006699">
			<element kind="textField" uuid="970781d6-87a0-4d3d-a07b-5ae173a1317a" x="753" y="0" width="40" height="16" forecolor="#FFFFFF" fontName="Arial" fontSize="12.0" evaluationTime="Report" bold="false" vTextAlign="Middle" style="Column header">
				<expression><![CDATA[" " + $V{PAGE_NUMBER}]]></expression>
			</element>
			<element kind="textField" uuid="42664b34-c87b-42f8-911b-bd9c2ab9111e" x="673" y="0" width="80" height="16" forecolor="#FFFFFF" fontName="Arial" fontSize="12.0" bold="false" hTextAlign="Right" vTextAlign="Middle" style="Column header">
				<expression><![CDATA["Page "+$V{PAGE_NUMBER}+" of"]]></expression>
			</element>
			<element kind="textField" uuid="06b3d6e8-b4a5-4251-b1fb-f640689933e8" x="2" y="0" width="197" height="16" forecolor="#FFFFFF" fontName="Arial" fontSize="12.0" pattern="EEEEE dd MMMMM yyyy" bold="false" vTextAlign="Middle" style="Column header">
				<expression><![CDATA[new java.util.Date()]]></expression>
			</element>
		</element>
	</pageFooter>
	<summary splitType="Stretch"/>
</jasperReport>
